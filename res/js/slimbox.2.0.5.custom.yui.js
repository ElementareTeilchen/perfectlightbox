/*!
     Slimbox v2.05 - The ultimate lightweight Lightbox clone for jQuery
     Edited by BEN for PerfectLightbox
     Updated by Raffael Comi
     (c) 2007-2013 Christophe Beyls <http://www.digitalia.be>
     MIT-style license.
 */
!function(e){function t(i){return parseInt(i.replace(/\D/g,""))}function n(){var i=P.scrollLeft(),t=P.width();e([j,N]).css("left",i+t/2),x&&e(F).css({left:i,top:P.scrollTop(),width:t,height:P.height()})}function s(i){i?e("object").add(X?"select":"embed").each(function(i,e){_[i]=[e,e.style.visibility],e.style.visibility="hidden"}):(e.each(_,function(i,e){e[0].style.visibility=e[1]}),_=[]);var t=i?"bind":"unbind";P[t]("scroll resize",n),e(document)[t]("keydown",o)}function o(i){var t=i.which,n=e.inArray;return n(t,m.closeKeys)>=0?f():n(t,m.nextKeys)>=0?a():n(t,m.previousKeys)>=0?l():n(t,m.slideshowKeys)>=0?u():null}function l(){return r(b)}function a(){return r(w)}function r(i){return i>=0&&(R=i,v=g[R][0],b=(R||(m.loop?g.length:0))-1,w=(R+1)%g.length||(m.loop?0:-1),y(),j.className="sbLoading",G=new Image,G.onload=c,G.src=v),!1}function c(){if(j.className="",e(E).css({backgroundImage:"url("+v+")",visibility:"hidden",display:""}),e(W).width(G.width),e([W,C,M]).height(G.height),e(q).html(g[R][1]||""),e(B).html((g.length>1&&m.counterText||"").replace(/###x###/,R+1).replace(/###y###/,g.length)),D)for(e(B).css("display","none"),e(L).html("").css("display",""),i=0;i<g.length;i++){var n=R==i?"act":"no",s=e('<a id="pmi'+(i+1)+'" href="#" class="'+n+'"></a>').click(function(){var i=t(e(this).attr("id"))-1;return p(),r(i)});s.html(i<9?"0"+(i+1):i+1),s.appendTo(L)}else e(B).css("display",""),e(L).html("").css("display","none");b>=0&&(J.src=g[b][0]),w>=0&&(U.src=g[w][0]),T=E.offsetWidth,I=E.offsetHeight;var o=Math.max(0,k-I/2);j.offsetHeight!=I&&e(j).animate({height:I,top:o},m.resizeDuration,m.resizeEasing),j.offsetWidth!=T&&e(j).animate({width:T,marginLeft:-T/2},m.resizeDuration,m.resizeEasing),e(j).queue(function(){e(N).css({width:T,top:o+I,marginLeft:-T/2,visibility:"hidden",display:""}),e(E).css({display:"none",visibility:"",opacity:""}).fadeIn(m.imageFadeDuration,d)})}function d(){b>=0&&e(C).show(),w>=0&&e(M).show(),e(Q).css("marginTop",-Q.offsetHeight).animate({marginTop:0},m.captionAnimationDuration),N.style.visibility="",e(O).css("display","none"),e(S).css("display","none"),A&&(clearTimeout(z),K?(e(S).css("display",""),R!=g.length-1?z=setTimeout(a,m.slideshowInterval):m.slideshowAutoclose?z=setTimeout(f,m.slideshowInterval):m.loop?z=setTimeout(r,m.slideshowInterval,0):p()):e(O).css("display","")),m.allowSave?e(H).attr("href",g[R][0]).css("display",""):e(H).css("display","none")}function u(){return K?p():h(),!1}function h(){return K=!0,R!=g.length-1?a():m.slideshowAutoclose&&!m.loop?z=setTimeout(f,0):m.loop&&r(0),!1}function p(){return K=!1,clearTimeout(z),e(O).css("display",""),e(S).css("display","none"),!1}function y(){G.onload=null,G.src=J.src=U.src=v,e([j,E,Q]).stop(!0),e([C,M,E,N]).hide()}function f(){return R>=0&&(p(),y(),R=b=w=-1,e(j).hide(),e(F).stop().fadeOut(m.overlayFadeDuration,s),clearTimeout(z)),!1}var m,g,v,b,w,x,k,T,I,L,D,A,K,z,O,S,H,F,j,E,W,C,M,N,Q,q,B,P=e(window),R=-1,X=!window.XMLHttpRequest,_=[],G=(document.documentElement,{}),J=new Image,U=new Image;e(function(){e("body").append(e([F=e('<div id="sbOverlay" />').click(f)[0],j=e('<div id="sbCenter" />')[0],N=e('<div id="sbBottomContainer" />')[0]]).css("display","none")),E=e('<div id="sbImage" />').appendTo(j).append(W=e('<div style="position: relative;" />').append([C=e('<a id="prevLink" href="#" />').click(l)[0],M=e('<a id="nextLink" href="#" />').click(a)[0]])[0])[0],Q=e('<div id="sbBottom" />').appendTo(N).append([e('<a id="closeLink" href="#" />').click(f)[0],O=e('<a id="playLink" href="#" />').click(h)[0],S=e('<a id="pauseLink" href="#" />').click(p)[0],H=e('<a id="saveLink" href="#" target="_blank" />')[0],q=e('<div id="sbCaption" />')[0],B=e('<div id="sbNumber" />')[0],L=e('<div id="sbPresent" />')[0],e('<div style="clear: both;" />')[0]])[0]}),e.slimbox=function(i,t,o){return m=e.extend({loop:!1,overlayOpacity:.8,overlayFadeDuration:400,resizeDuration:400,resizeEasing:"swing",initialWidth:250,initialHeight:250,imageFadeDuration:400,captionAnimationDuration:400,counterText:"Image ###x### of ###y###",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78],slideshowKeys:[83],allowSave:!1,slideshowAutoplay:!1,slideshowInterval:3e3,slideshowAutoclose:!0},o),"string"==typeof i&&(i=[[i,t]],t=0),k=P.scrollTop()+P.height()/2,T=m.initialWidth,I=m.initialHeight,e(j).css({top:Math.max(0,k-I/2),width:T,height:I,marginLeft:-T/2}).show(),x=X||F.currentStyle&&"fixed"!=F.currentStyle.position,x&&(F.style.position="absolute"),e(F).css("opacity",m.overlayOpacity).fadeIn(m.overlayFadeDuration),n(),s(1),g=i,m.loop=m.loop&&g.length>1,K=m.slideshowAutoplay&&A,r(t)},e.fn.slimbox=function(i,t,n){t=t||function(i){return D=i.rel.match(/present.+/)?!0:!1,A=i.rel.match(/slideshow.+/)?!0:!1,[i.href,i.title]},n=n||function(){return!0};var s=this;return s.unbind("click").click(function(){var o,l,a=this,r=0,c=0;for(o=e.grep(s,function(i,e){return n.call(a,i,e)}),l=o.length;l>c;++c)o[c]==a&&(r=c),o[c]=t(o[c],c);return e.slimbox(o,r,i)})}}(jQuery);var SlimboxOptions=jQuery.extend({},window.SlimboxOptions||{});/android|iphone|ipod|series60|symbian|windows ce|blackberry/i.test(navigator.userAgent)||jQuery(function(i){i("a[rel^='lightbox']").slimbox(SlimboxOptions,null,function(i){return this==i||this.rel.length>8&&this.rel==i.rel})});